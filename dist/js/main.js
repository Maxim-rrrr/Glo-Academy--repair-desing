$(document).ready(function(){var e=$(".modal");$("[data-toggle=modal]").on("click",()=>{e.toggleClass("modal--visible")}),e.on("click",()=>{"modal__close"!==event.target.className&&"modal modal--visible"!==event.target.className||e.removeClass("modal--visible")}),window.addEventListener("keydown",function(n){27==n.keyCode&&(e.removeClass("modal--visible"),a.removeClass("modal--visible"))},!0);var a=$(".modal-thanks");a.on("click",()=>{"modal__close-thanks"!==event.target.className&&"modal-thanks modal--visible"!==event.target.className||a.removeClass("modal--visible")});new Swiper(".projects__swiper-container",{loop:!0,pagination:{el:".projects__swiper-pagination",type:"bullets"},navigation:{nextEl:".projects__swiper-button-next",prevEl:".projects__swiper-button-prev"}});var n=$(".projects__swiper-button-next"),t=$(".projects__swiper-button-prev"),i=$(".projects__swiper-pagination");n.css("left",t.width()+20+i.width()+20),i.css("left",t.width()+20);new Swiper(".steps__swiper-container",{loop:!0,pagination:{el:".steps__swiper-pagination,.plan__swiper-pagination",type:"bullets"},navigation:{nextEl:".steps__swiper-button-next",prevEl:".steps__swiper-button-prev"}});var r=$(".steps__swiper-button-next"),o=$(".steps__swiper-button-prev"),s=$(".steps__swiper-pagination");function l(e){e.target.playVideo()}r.css("left",o.width()+20+s.width()+20),s.css("left",o.width()+20),(new WOW).init(),$(".modal__form").validate({rules:{userName:{required:!0,minlength:2,maxlength:15},userPhone:{required:!0,minlength:18},userEmail:{required:!0,email:!0},policyCheckbox:{required:!0}},errorClass:"invalid",messages:{userName:{required:"Имя обязательно",minlength:"Длина имени 2-15 символов",maxlength:"Длина имени 2-15 символов"},userPhone:{required:"Телефон обязательно",minlength:"Введите телефон полностью"},userEmail:{required:"Обязательно укажите Email",email:"Введите в формате: name@domain.com"},policyCheckbox:{required:"Нужно поставить галочку"}},submitHandler:function(n){$.ajax({type:"POST",url:"send.php",data:$(n).serialize(),success:function(t){console.log("Ajax сработал, ответ с сервера",t),$(n)[0].reset(),e.removeClass("modal--visible"),a.toggleClass("modal--visible"),ym(61250854,"reachGoal","form")}})}}),$(".footer__form").validate({rules:{userName:{required:!0,minlength:2,maxlength:15},userPhone:{required:!0,minlength:18},userQuestion:{required:!0},policyCheckbox:{required:!0}},errorClass:"invalid",messages:{userName:{required:"Имя обязательно",minlength:"Длина имени 2-15 символов",maxlength:"Длина имени 2-15 символов"},userPhone:{required:"Телефон обязательно",minlength:"Введите телефон полностью"},userQuestion:{required:"Обязательно напишите вопрос"},policyCheckbox:{required:"Нужно поставить галочку"}},submitHandler:function(e){$.ajax({type:"POST",url:"send.php",data:$(e).serialize(),success:function(n){console.log("Ajax сработал, ответ с сервера",n),$(e)[0].reset(),a.toggleClass("modal--visible"),ym(61250854,"reachGoal","form")}})}}),$(".control__form").validate({rules:{userName:{required:!0,minlength:2,maxlength:15},userPhone:{required:!0,minlength:18},policyCheckbox:{required:!0}},errorClass:"invalid",messages:{userName:{required:"Имя обязательно",minlength:"Длина имени 2-15 символов",maxlength:"Длина имени 2-15 символов"},userPhone:{required:"Телефон обязательно",minlength:"Введите телефон полностью"},policyCheckbox:{required:"Нужно поставить галочку"}},submitHandler:function(e){$.ajax({type:"POST",url:"send.php",data:$(e).serialize(),success:function(n){a.toggleClass("modal--visible"),console.log("Ajax сработал, ответ с сервера",n),$(e)[0].reset(),ym(61250854,"reachGoal","form")}})}}),$("[type=tel]").mask("+7 (000) 000-00-00",{placeholder:"+7 (___) ___-__-__"}),$(".video__play").on("click",function(){new YT.Player("player",{height:"465",width:"100%",videoId:"8awdQRP816c",events:{onReady:l}})});var m=$(".ymap-container").children(".loader"),c=0;m=$(".ymap-container").children(".loader"),c=0;function d(){var e=new ymaps.Map("map-yandex",{center:[47.244729,39.723187],zoom:18,controls:["zoomControl","fullscreenControl"]}),a=new ymaps.Placemark([47.244729,39.723187],{balloonContent:"Офис Repair Design Project"},{iconLayout:"default#imageWithContent",iconImageHref:"img/map-marker.png",iconImageSize:[32,32],iconImageOffset:[-25,-50]});e.geoObjects.add(a),function(e){return new ymaps.vow.Promise(function(a,n){var t=function(e){for(var a in e)if(e.hasOwnProperty(a)&&(e[a]instanceof ymaps.layer.tileContainer.CanvasContainer||e[a]instanceof ymaps.layer.tileContainer.DomContainer))return e[a];return null}(e),i=!0;t.tiles.each(function(e,a){e.isReady()||(i=!1)}),i?a():t.events.once("ready",function(){a()})})}(e.layers.get(0).get(0)).then(function(){m.removeClass("is-active")})}var u=function(){$(".ymap-container").mouseenter(function(){var e,a,n;0==c&&(c=1,m.addClass("is-active"),e="https://api-maps.yandex.ru/2.1/?lang=ru_RU&amp;loadByRequire=1",a=function(){ymaps.load(d)},(n=document.createElement("script")).readyState?n.onreadystatechange=function(){"loaded"!=n.readyState&&"complete"!=n.readyState||(n.onreadystatechange=null,a())}:n.onload=function(){a()},n.src=e,document.getElementsByTagName("head")[0].appendChild(n))})};$(function(){u()})});